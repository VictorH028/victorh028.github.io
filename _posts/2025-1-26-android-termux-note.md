---
comments: true
layout: single
title: NotasAndroid_Termux 
date: 2025-01-26
classes: wide
header:
  teaser: /assets/images/
  teaser_home_page: true
categories:
  - notas 
tags:
  - notas 
  - termux
---




# Mis demonis en un solo lugar 


> [!WARNING]
> 


> [!NOTE]
> Mucho del mis imsobnios  vine de  la comunidad de ``@ivam3`` y sus subcriptores 


# Android Ingenieria Inversa 

# Programacion lenguajes 

- C++  : [[ 1 ]](https://www.learncpp.com) - [[ 2 ]](https://en.cppreference.com)
- Java : [[ 1 ]](https://www.homeandlearn.co.uk/java/java.html) - [[ 2 ]](https://www.codecademy.com/learn/learn-java) - [[ 3 ]](https://www.tutorialspoint.com/java/index.htm) - [[ 4 ]](https://www.youtube.com/watch?v=eIrMbAQSU34&t=6s)
- Kotlin : [[ 1 ]](https://developer.android.com/kotlin) - [[ 2 ]](https://kotlinlang.org/docs/home.html)
- XML : [[ 1 ]](https://www.w3schools.com/xml/) - [[ 2 ]](https://www.tutorialspoint.com/xml/index.htm)
- Smali : [[ 1 ]](https://github.com/JesusFreke/smali) - [[ 2 ]](https://source.android.com/devices/tech/dalvik/dalvik-bytecode) - [[ 3 ]](https://programmer.help/blogs/smali-introduction-manual.html) - [[ 4 ]](https://forum.xda-developers.com/t/guide-smali-coding-guide-for-beginners.2193735/)
- Assembly :  [[ 1 ]](https://www.tutorialspoint.com/assembly_programming/index.htm) - [[ 2 ]](https://cs.lmu.edu/~ray/notes/nasmtutorial/) - [[ 3 ]](https://www.cs.virginia.edu/~evans/cs216/guides/x86.html) - [[ 4 ]](http://www.egr.unlv.edu/~ed/assembly64.pdf)


# Redes

- ISO model
- TCP/IP
- DNC 
- HTTP
- SSL/TLS
- Proxy 

# Criptografia 

- Encryption : 
- Hashing :
- MAC :
- RSA :
- AES :

# Dise帽o y arquitectura de Android

- N煤cleo de Linux: [[ 1 ]](https://developer.android.com/guide/platform?hl=en)
- HAL
- Biblioteca Nativa
- Tiempo de ejecuci贸n de Android
- API de Java
- Aplicaci贸n del sistema
- CPI
- Aglutinante
- M谩quina virtual Dalvik
- Sandboxing (caja de arena)
- Usuario y grupo
- Sistema de archivos / Partici贸n
- Archivo
- Base de datos
- SQLite: 

# Permisos

- Application level : [[ 1 ]](https://developer.android.com/guide/topics/permissions/overview)
- Protection levels
- Custom Permissio

# Componentes de la aplicaci贸n

- Actividad : [ 1 ]
- Servicio : [ 1 ]
- Receptor de transmisi贸n: [ 1 ]
- Proveedor de contenido: [ 1 ]
- Manifiesto: [ 1 ]
- Intenci贸n: [ 1 ] - [ 2 ]

# API principal

- Criptograf铆a: [ 1 ]
- Interacci贸n con otras aplicaciones: [ 1 ]
- Interfaz de usuario: [ 1 ]
- Im谩genes y gr谩ficos: [ 1 ]
- Audio y v铆deo: [ 1 ]
- procesamiento en segundo plano: [ 1 ]
- Datos y archivos de la aplicaci贸n: [ 1 ]
- Toque y entrada: [ 1 ]
- Sensores: [ 1 ]
- Conectividad: [ 1 ]

# Interacci贸n con el servidor

- Confidencialidad y Autenticaci贸n
- Biblioteca HTTP
- OkHttp
- Voleo
- Modernizaci贸n
- Suite para eructos
- Fijaci贸n SSL
- Validaci贸n de certificados
- Proxy y sniffer para tr谩fico HTTP
- Implementaci贸n de SSL/TLS

# An谩lisis est谩tico

- Proceso de desarrollo de APK
- Estructura del APK: [ 1 ]
- Descompilaci贸n
- Herramienta APK
- Parcheo de c贸digo
- C贸digo nativo
- Desmontaje
- IDA

# An谩lisis din谩mico
- Rastreo de pila
- Enganche
- Depuraci贸n
- ADB
- Emulador
- Movimiento gen茅tico
- AVD
- Bluestack
- Detecci贸n / Bypass
- Maquina virtual
- PIN SSL
- Enraizamiento
- Herramientas
- Drozer
- Objeci贸n
- Xposed
- RMS
- MOBS

# Ataques 
- Componentes exportados inadvertidamente
- Componentes exportados protegidos de forma inadecuada
- Intenciones que son vulnerables a la interceptaci贸n o escuchas clandestinas
- Validaci贸n incorrecta del certificado x.509
- Creaci贸n de archivos legibles o escribibles por todo el mundo
- Actividades que pueden filtrar datos
- El uso de Sticky Intents
- Intenciones pendientes creadas de forma insegura
- Env铆o de intenciones de difusi贸n inseguras
- Claves privadas incrustadas en la fuente
- Uso de criptograf铆a d茅bil o inadecuada
- Configuraciones de WebView potencialmente explotables
- Actividades de preferencia exportadas
- Robo de grifos
- Aplicaciones que permiten realizar copias de seguridad
- Aplicaciones que se pueden depurar
- Aplicaciones que admiten versiones de API obsoletas, con vulnerabilidades conocidas
- Transmisi贸n de datos insegura
- IPC inseguro
- Problema de permiso
- Almacenamiento de datos inseguro
- Problema con la vista web
- Registros inseguros

锔 Ariba las bases 

 Abajo lo que veo  en el camino 

> [!NOTE]
> La mayor铆a de los dispositivos Android funcionan con ARM 

# Herramientas

- Radare2: [[ 1 ]](https://github.com/radareorg/radare2) 
- am
- pm
- aapt2
- Fridra:  [[ 1 ]](https://frida.re/) - [[2]](https://hacktricks.boitatech.com.br/mobile-apps-pentesting/android-app-pentesting/frida-tutorial)
- Ghidra 
- JADX 
- Apktool 
- Qark : [[ 1 ]](https://github.com/linkedin/qark)

# Assembly 

**Comnados**
 - [as](https://sourceware.org/binutils/docs/as/index.html#Top)  : De lenguage emsablador a codigo maquina   
 - [ld](https://sourceware.org/binutils/docs/ld/)  : 


[Intoducion al los comceptos basicos de  ensamblaje arm](https://azeria-labs.com/writing-arm-assembly-part-1/)

**Explotacion**
- [[1]](https://azeria-labs.com/tcp-reverse-shell-in-assembly-arm-32-bit/)

# ROP 

[[1]](https://docs.pwntools.com/en/stable/rop/rop.html)

# Desarollo de  exploit `ARM` 

 [1](https://fuzzysecurity.com/tutorials/expDev/1.html) 

 [2](https://www.corelan.be/index.php/2009/07/19/exploit-writing-tutorial-part-1-stack-based-overflows/) 

# [Radare2](https://book.rada.re/config/evars.html)

- **CLI**
    - `-d ` : 
- **Inter**
    - "iE"  : 
    - `bdi` : Punto de intrucsion
    - `pdda` : Comando para ver el ensamblado y el c贸digo fuente descompilado uno al lado del otro.
    - *Debug commands* 
        - `d `

**Plugings**

- `r2dec` : Descompilador 


**Introducci贸n a la interfaz nativa de Java (JNI)**

La interfaz nativa de Java (JNI) permite a los desarrolladores declarar m茅todos Java implementados en c贸digo nativo (normalmente compilado en C/C++). La interfaz JNI no es espec铆fica de Android, pero est谩 disponible de forma m谩s general para aplicaciones Java que se ejecutan en diferentes plataformas.

**Documentaci贸n de Oracle JNI**

- [Espesificacion de JNI](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
- [Funciones de JNI](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html) <<-- __Siempre tengo esta abierta y la consulto mientras invierto bibliotecas nativas de Android__


**Referencias de JNI y NDK de Android**

- [Consejos sobre JNI para Android](https://developer.android.com/training/articles/perf-jni) <-- Recomiendo leer la secci贸n "Bibliotecas nativas" para comenzar
- [Introducci贸n al NDK](https://developer.android.com/ndk/guides/) <-- Esta es una gu铆a sobre c贸mo los desarrolladores desarrollan bibliotecas nativas y comprenden c贸mo se construyen las cosas, lo que hace que sea m谩s f谩cil revertirlas.

### Analisis Estatico

- **Buscar cadenas**
    - (contrase帽as, URL, API, cifrado, puertas traseras, tokens, UUID de Bluetooth...)
    - Atenci贸n especial a las [API de Firebase](https://hacktricks.boitatech.com.br/pentesting/pentesting-web/buckets/firebase-database)
- **Leer el manifiesto**
    - Comprueba si el APK permite realizar copias de seguridad
    - Actividades exportadas
    - Servicios expuestos
    - Esquemas de URL 

### Analisis Dinamico 

 - Existe alguna fuga de datos no intencionada (registro, copiar/pegar, registros de fallos)?

- 驴Se guarda informaci贸n confidencial en bases de datos SQLite ?

- 驴Actividades expuestas explotables ?

- 驴Proveedores de contenido explotables ?

- 驴Servicios expuestos explotables ?

- 驴Receptores de transmisi贸n explotables ?

- 驴La aplicaci贸n transmite informaci贸n en texto claro o utilizando algoritmos d茅biles ? 驴Es posible un MitM?

- Inspeccionar el tr谩fico HTTP/HTTPS
    - Esto es realmente importante, porque si puedes capturar el tr谩fico HTTP puedes buscar vulnerabilidades web comunes (Hacktricks tiene mucha informaci贸n sobre vulnerabilidades web).

- Compruebe si hay posibles inyecciones del lado del cliente de Android (probablemente alg煤n an谩lisis de c贸digo est谩tico ayudar谩 aqu铆)

- Frida : S贸lo Frida, 煤sala para obtener datos din谩micos interesantes de la aplicaci贸n (quiz谩s algunas contrase帽as...

### Analisis Dinamico en Linea

Puedes crear una cuenta gratuita en: ``https://appetize.io/`` . Esta plataforma te permite subir y ejecutar APKs, por lo que es 煤til para ver c贸mo se comporta un apk.

Incluso puedes ver los registros de tu aplicaci贸n en la web y conectarte a trav茅s de adb .


### Referencias CTF

Apk-vulnerable [[ 1  ]](https://github.com/payatu/diva-android) - [[ 2 ]](https://github.com/dineshshetty/Android-InsecureBankv2?tab=readme-ov-file) - [[ 3 ]](https://github.com/payatu/BugBazaar)

# Contenido de la comunidad

- [aqui](url) 

# Pendientes por resolver

- [aqui](url)


# Foros que me llamaron la atencion 
[bypassing-root-detection](https://medium.com/@aimardcr/bypassing-root-detection-the-universal-way-2625712172e5) 

[BypassSelinux](https://klecko.github.io/posts/selinux-bypasses/) 

[](https://nelenkov.blogspot.com/2015/06/password-storage-in-android-m.html?m=1)

[Seguridad de android](https://github.com/Ralireza/Android-Security-Teryaagh) 

[Buscar numeros magicos](https://www.garykessler.net/library/file_sigs.html)

{% if page.comments %}
<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://blok-termux.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
{% endif %}


